CREATE DATABASE IF NOT EXISTS customer;
USE customer;
CREATE TABLE IF NOT EXISTS CUSTOMER (
    cust_id INTEGER NOT NULL PRIMARY KEY,
    cname VARCHAR(50) ,
    city VARCHAR(50) NOT NULL
);

CREATE TABLE IF NOT EXISTS ORDERS (
    order_id INTEGER NOT NULL PRIMARY KEY,
    o_date DATE NOT NULL,
    cust_id INTEGER NOT NULL,
    order_amt INTEGER,
    FOREIGN KEY(cust_id) REFERENCES CUSTOMER(cust_id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS ITEM(
    item_id INTEGER NOT NULL PRIMARY KEY,
    unit_price INTEGER
);

CREATE TABLE IF NOT EXISTS WAREHOUSE 
(
    w_id INTEGER NOT NULL PRIMARY KEY,
    city VARCHAR(50) NOT NULL
);


CREATE TABLE IF NOT EXISTS ORDER_ITEM (
    order_id INTEGER NOT NULL ,
    item_id INTEGER NOT NULL,
    qty INTEGER,
    FOREIGN KEY(order_id) REFERENCES ORDERS(order_id)ON DELETE CASCADE,
    FOREIGN KEY(item_id) REFERENCES ITEM(item_id) ON DELETE CASCADE
);
CREATE TABLE IF NOT EXISTS SHIPMENT (
    order_id INTEGER NOT NULL,
    w_id INTEGER NOT NULL,
    ship_date DATE NOT NULL,
    FOREIGN KEY(order_id) REFERENCES ORDERS(order_id) ON DELETE CASCADE,
    FOREIGN KEY(w_id) REFERENCES WAREHOUSE(w_id) ON DELETE CASCADE
);

INSERT INTO CUSTOMER VALUES
(0001, "C1", "Mysuru"),
(0002, "C2", "Haveri"),
(0003, "C3", "Bhopal"),
(0004, "C4", "Pune"),
(0005, "C5", "Mandya");

INSERT INTO ORDERS VALUES
(001, "2020-01-14", 0001, 2000),
(002, "2021-04-13", 0002, 500),
(003, "2019-10-02", 0005, 2500),
(004, "2019-05-12", 0003, 1000),
(005, "2020-12-23", 0004, 1200);

INSERT INTO ITEM VALUES
(0001, 400),
(0002, 200),
(0003, 1000),
(0004, 100),
(0005, 500);

INSERT INTO WAREHOUSE VALUES
(101, "Mysuru"),
(202, "Haveri"),
(303, "Bhopal"),
(404, "Pune"),
(505, "Mandya");

INSERT INTO ORDER_ITEM VALUES
(001, 0001, 5),
(002, 0002, 1),
(003, 0005, 5),
(004, 0003, 3),
(005, 0004, 2);
INSERT INTO SHIPMENT VALUES
(001, 202, "2020-01-16"),
(002, 101, "2021-04-14"),
(003, 404, "2019-10-07"),
(004, 303, "2019-05-16"),
(005, 505, "2020-12-23");

SELECT * FROM CUSTOMER;
SELECT * FROM ORDERS;
SELECT * FROM ITEM;
SELECT * FROM WAREHOUSE;
SELECT * FROM ORDER_ITEM;
SELECT * FROM SHIPMENT;


ALTER TABLE ITEM MODIFY unit_price INTEGER NOT NULL;
ALTER TABLE CUSTOMER MODIFY CITY VARCHAR(15) NOT NULL;
ALTER TABLE ORDERS modify o_date DATE NOT NULL;
UPDATE ORDERS SET order_amt = 600 WHERE order_id = 002;
UPDATE ORDER_ITEM SET item_id = 0002 WHERE order_id = 002;
UPDATE ORDER_ITEM SET qty = 3 WHERE order_id = 002;
DELETE FROM WAREHOUSE WHERE w_id = 404;

SELECT * FROM CUSTOMER;
SELECT * FROM ORDERS;
SELECT * FROM ORDER_ITEM;
SELECT * FROM ITEM;
SELECT * FROM SHIPMENT;
SELECT * FROM WAREHOUSE;